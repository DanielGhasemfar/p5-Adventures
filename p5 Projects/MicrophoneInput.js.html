<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/addons/p5.dom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/addons/p5.sound.min.js"></script>
    <script>
	
var mic;
Vx = 0
Vy = 0
x=0
y=0
prevVol = 0

function setup() {
 createCanvas(1000, 1000)
  mic = new p5.AudioIn()
  mic.start()
  y1 = random()*200 - 400
  y2 = 100 + random()*80
  points = 0
	
}

function draw() {
  translate(width/2,height/2)
  background(255);
  fill(255,points,points)
  rect(-10,y1,20,y2)
  fill(0)
	
  if(y>y1 && y<y1+y2){
	  points++
	  console.log(vol)
  }
	
  if(points > 255){
  y1 = random()*200
  y2 = 100 + random()*80
  points = 0
  }
  var vol = mic.getLevel();
	
  if(vol>0.1 && prevVol<0.1){
	  Vy = -7
  }
	
  Vy += .3

  y += Vy
  
  prevVol = vol
  
	
  ellipse(x, y, vol*50+20, vol*50+20);
}
	
	</script>
    <link rel="stylesheet" type="text/css" href="style.css">
  <style> body {padding: 0; margin: 0;} </style>
  </head>
  <body>
  </body>
</html>